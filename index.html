<!DOCTYPE html>
<html>
<head>
	<title> IVWS IDY2022 </title>
  	
</head>
<body>
	<div id="hero">
		<h1>International Day of Yoga</h1>
		
	</div>	
	<div id="display">
		<div id="loader"> 
			<h4></h4> 
		</div>
		<div id="allNames">
		</div>
		<div id="errorMessage"> 
			<h2> Failed to get data. Please refresh </h2>
		</div>
	</div>
	<footer>
    <h5>©️ Copyright Indus Valley World School</h5></footer>
	<script>
		let allNamesElm = document.getElementById("allNames")
		let loaderElm = document.getElementById("loader")
		let errorMessageElm = document.getElementById("errorMessage")
		
		function setErrorDisplay(){
			loaderElm.style.display = "none"
			allNamesElm.style.display = "none"
			errorMessageElm.style.display = "block"
		}
			
		fetch("https://api.apispreadsheets.com/data/hPNqxXaGP4r2QSMv/").then(res=>{
			if (res.status === 200){
				res.json().then(data=>{
					const yourData = data["data"]
					for(let i = 0; i < yourData.length; i++){
						let rowInfo = yourData[i]

						let rowInfoDiv = document.createElement("div")
						rowInfoDiv.classList.add("name-row")

						let rowName = document.createElement("h4")
						let rowNameNode = document.createTextNode(rowInfo["name"])
						rowName.appendChild(rowNameNode)
						rowName.classList.add("name")

						let rowWritten = document.createElement("p")
						let rowWrittenNode = document.createTextNode(rowInfo["written"])
						rowWritten.appendChild(rowWrittenNode)
						rowWritten.classList.add("written")

						
						let rowVideo = document.createElement("video")
						rowVideo.id = "video-player"
						rowVideo.controls = "controls"
						rowVideo.src = rowInfo["video"]
						rowVideo.type = "video/mp4"
						rowVideo.classList.add("video")

						rowInfoDiv.appendChild(rowName)
						rowInfoDiv.appendChild(rowWritten)
						rowInfoDiv.appendChild(rowVideo)

						allNamesElm.appendChild(rowInfoDiv)

					}
					
					loaderElm.style.display = "none"
					allNamesElm.style.display = "block"
					errorMessageElm.style.display = "none"

				}).catch(err => {
					setErrorDisplay()
				})
			}
			else{
				setErrorDisplay()
			}
		}).catch(err =>{
			setErrorDisplay()
		})
	</script>
    <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap');

body{
	font-family: 'Roboto', sans-serif;
	text-align: center;
	margin: 0;
}

#display{
	min-height: 100vh;
}

#hero{
	color: white;
	padding: 35px 0 35px 0;
 	background: #FF512F;  /* fallback for old browsers */
	background: -webkit-linear-gradient(to right, #F09819, #FF512F);  /* Chrome 10-25, Safari 5.1-6 */
	background: linear-gradient(to right, #F09819, #FF512F); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
 }

#hero > h1{
	margin-top: 0;
}

footer{
	text-align: center;
	margin-top: 50px;
	padding-top: 15px;
	width: 100%;
	height: 100px;
	color: white;
	background: #11998e;  /* fallback for old browsers */
	background: -webkit-linear-gradient(to right, #38ef7d, #11998e);  /* Chrome 10-25, Safari 5.1-6 */
 	background: linear-gradient(to right, #38ef7d, #11998e); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */
}

#allNames{
	display: none;
}

#errorMessage{
	display: none;
	color: red;
}

#loader {	
  border: 16px solid #f3f3f3; /* Light grey */
  border-top: 16px solid #3498db; /* Blue */
  border-radius: 50%;
  width: 50px;
  height: 50px;
  animation: spin 2s linear infinite;
  margin: auto;
  margin-top: 40px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.name{
	color: blue;
	display:inline-block;
	padding: 10px;
	text-transform: capitalize;
	text-align: center;
}

.written{
	display:inline-block;
	text-align: center;
}

.video{
	display: block;
	margin-left:auto;
	margin-right:auto;
    width:auto;
    height:250px;
}

.name-row{
	text-align: center;
}

#noNameFound{
	display: none;
	color: red;
}
</style>
</body>
</html>
